<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">   
        <title><%= pwd %></title>
        <link rel="stylesheet" href="/f5static/tree.css" type="text/css" charset="utf-8">
        <link rel="stylesheet" href="/f5static/nprogress.css" type="text/css" charset="utf-8">
        <script src="/f5static/jquery.js"></script>
        <script src="/f5static/jquery.pjax.js"></script>
        <script src="/f5static/nprogress.js" type="text/javascript" charset="utf-8"></script>
        <% if(ismain) { %>
        <script type="text/javascript">
            if (location.pathname == "/" && location.search != '?debug') {
                location.pathname = 'projects.html';
            }
        </script>
        <% } %>
        <script type="text/javascript">
            $(document).pjax(".pjax-item", '.wrapper')
                    .on('pjax:start', function() { NProgress.start(); })
                    .on('pjax:end',   function() { NProgress.done();  });
        </script>
    </head>
    <body>
        <div class="wrapper">
            <div id="mainTree" class="main-tree tree-container">
                <div class="tree-padding">
                    <a href="http://<%= localip %>:<%= port %><%= url %>">&para;</a>
                    <div id="pwd" 
                        class="pwd" 
                        data-localip="<%= localip %>"
                        data-root="<%= rootpath %>" 
                        data-mainport="<%= mainport %>"
                        data-pwd="<%= pwd %>">
                        <%= pwd %>
                    </div>
                    <div id="filetypes" class="filetypes"></div>
                    <div id="fileTree" class="file-tree">
                        <%- include('./dir.ejs', {tree: tree}) %>
                    </div>
                </div>
            </div>
            <div id="pickTree" class="pick-tree tree-container">
                <div class="tree-padding">
                    <div>
                        <button class="btn-item pick-btn" id="pickBtn">pack</button>
                        <button class="btn-item clear-btn" id="clearBtn">clear</button>
                    </div>
                    <div id="pickFileTree" class="file-tree"></div>
                    <div id="msg"></div>
                </div>
            </form>
            <div class="clear" style="clear:both"></div>
        </div>
        <script src="/socket.io/socket.io.js"></script>
        <script type="text/javascript">
            var socket = io.connect(location.hostname);
            socket.on('reload', function (data) {
                window.location.reload();
            });
        </script>
        <script src="/f5static/tree.js"></script>
        <script src="/f5static/picker.js"></script>
    </body>
</html>
